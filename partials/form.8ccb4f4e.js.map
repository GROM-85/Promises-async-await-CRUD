{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAOC,SAASC,cAAc,oBAC9BC,EAAaF,SAASC,cAAc,SAGpCE,GAFeH,SAASC,cAAc,WAEvBF,EAAKK,UACpBC,EAAW,WACjB,IAAIC,EAAW,CAAC,EAqCdP,EAAKQ,iBAAiB,UAnCxB,SAA2BC,GACvBA,EAAMC,iBACN,IAAI,IAAKC,EAAIC,KAAU,IAAIC,SAASJ,EAAMK,eAAeC,UACvDR,EAASI,GAAOC,EAElBI,QAAQC,IAAIV,GACZW,EAAApB,GAASqB,OAAOC,QAAQ,4CACxBC,aAAaC,WAAWhB,GACxBG,EAAMK,cAAcS,OAEtB,IA0BApB,EAAWK,iBAAiB,SAT5B,WAEE,IAAI,IAAKG,EAAIC,KAAU,IAAIC,SAASb,GAAMe,UACxCR,EAASI,GAAOC,EAElBS,aAAaG,QAAQlB,EAASmB,KAAKC,UAAUnB,GAE/C,IAtBA,WACE,IAAIoB,EACJ,IACCA,EAAcF,KAAKG,MAAMP,aAAaQ,QAAQvB,KAAc,CAAC,EAE7D,IAAI,IAAIwB,KAAQ1B,EACZ0B,EAAKC,OAAMD,EAAKlB,MAAQe,EAAYG,EAAKC,OAAS,GAMvD,CAHC,MAAMC,GACLhB,QAAQC,IAAIe,EAAMC,SAClBf,EAAApB,GAASqB,OAAOe,QAAQF,EAAMC,QAChC,CACF,CAYAE","sources":["src/js/form.js"],"sourcesContent":["import Notiflix from \"notiflix\";\n\nconst form = document.querySelector(\"#save-later-form\");\nconst saveButton = document.querySelector(\"#save\");\nconst submitButton = document.querySelector(\"#submit\");\n\nconst formElements = form.elements;\nconst KEY_FORM = \"formData\";\nlet formData = {};\n\nfunction formSubmitHandler(event){\n    event.preventDefault();\n    for(let [key,value] of new FormData(event.currentTarget).entries()){\n      formData[key] = value;\n    }\n    console.log(formData);\n    Notiflix.Notify.success(\"The form has been successfully submitted\");\n    localStorage.removeItem(KEY_FORM);\n    event.currentTarget.reset();\n    \n  }\n  \n  function retreiveData(){\n    let defaultData;\n    try{\n     defaultData = JSON.parse(localStorage.getItem(KEY_FORM)) || {};\n\n     for(let elem of formElements){\n      if(elem.name) elem.value = defaultData[elem.name] || \"\";\n      \n     }\n    }catch(error){\n      console.log(error.message);\n      Notiflix.Notify.warning(error.message);\n    }\n  }\n  \n  function saveDataHandler(){\n    \n    for(let [key,value] of new FormData(form).entries()){\n      formData[key] = value;\n    }\n    localStorage.setItem(KEY_FORM,JSON.stringify(formData));\n    \n  }\n  form.addEventListener(\"submit\",formSubmitHandler);\n  saveButton.addEventListener(\"click\",saveDataHandler);\n  retreiveData();\n\n\n// const getFormData = () => {\n//   const data = {};\n\n//   for (const { name, value } of formElements) {\n//     if (name) { //cause buttons dont have names\n//       data[name] = value;\n//     }\n//   }\n\n//   return data\n// };\n\n// const handleSudmit = (event) => {\n//   event.preventDefault()\n\n//   form.reset()\n//   localStorage.removeItem(KEY_FORM)\n\n//   const message = \"The form has been successfully submitted\";\n//   Notiflix.Notify.success(message);\n// };\n\n// const handleSave = (event) => {\n//   let data = getFormData();\n\n//   localStorage.setItem(KEY_FORM, JSON.stringify(data))\n\n//   const message = \"Form draft has been saved!\";\n//   Notiflix.Notify.success(message);\n// };\n\n// const getSavedFormData = () => {\n//   try {\n//     const saveData = JSON.parse(localStorage.getItem(KEY_FORM))\n\n//     for (const element of formElements) {\n\n//       // if(saveData[element.name]){}\n//       if (element.name in saveData) {\n//         element.value = saveData[element.name]\n//       }\n//     }\n\n//     const message = \"Form has been refilled with saved data!\";\n//     Notiflix.Notify.info(message);\n//   } catch (error) {\n//     const message = \"Enter data!\";\n//     Notiflix.Notify.warning(message);\n//   }\n// };\n\n// submitButton.addEventListener(\"click\", handleSudmit);\n// saveButton.addEventListener(\"click\", handleSave);\n\n// getSavedFormData();"],"names":["$7Y9D8","parcelRequire","$86f33108e3380025$var$form","document","querySelector","$86f33108e3380025$var$saveButton","$86f33108e3380025$var$formElements","elements","$86f33108e3380025$var$KEY_FORM","$86f33108e3380025$var$formData","addEventListener","event","preventDefault","key","value","FormData","currentTarget","entries","console","log","$parcel$interopDefault","Notify","success","localStorage","removeItem","reset","setItem","JSON","stringify","defaultData","parse","getItem","elem","name","error","message","warning","$86f33108e3380025$var$retreiveData"],"version":3,"file":"form.8ccb4f4e.js.map"}